#!/usr/bin/env node

var cli = require("../lib/cli");
module.exports = cli;
//var _ = require("lodash");
//var fs = require("fs");
//var Diagram = require("../lib/components/Diagram").Diagram;
//var hl = require("highland");
//var path = require("path");
//var npmPackage = require("../package.json");
//var ndjson = require("ndjson");
//var program = require("commander");
////import { renderToString } from 'react-dom/server'
//var React = require("react");
//var ReactDOM = require("react-dom");
//var renderToString = require("react-dom/server").renderToString;
//var edgeDrawers = require("../lib/EdgeDrawers").edgeDrawers;
//var markerDrawers = require("../lib/EdgeDrawers").markerDrawers;
//
////var VError = require("verror");
//
//program
//  .version(npmPackage.version)
//  .description("Converts Kaavio-formatted JSON to SVG")
//  .option(
//    "--id [string]",
//    'Specify unique ID of this pathway, e.g., "http://identifiers.org/wikipathways/WP4"'
//  );
//
//program.on("--help", function() {
//  console.log("  Examples:");
//  console.log();
//  console.log("    Convert Kaavio-formatted JSON into SVG:");
//  console.log(
//    "    $ kaavio ../../bulk-gpml2pvjson/unified/WP100.json WP100.svg"
//  );
//  console.log();
//  console.log("    Convert streaming:");
//  console.log(
//    "    $ cat ../../bulk-gpml2pvjson/unified/WP100.json | kaavio  > ./WP100.svg"
//  );
//});
//
//program.parse(process.argv);
//
//var id = program.id;
//
//var source = hl(process.stdin).through(ndjson.parse());
//
////var kaavio = new Diagram();
//
////console.log("kaavio");
////console.log(kaavio);
//console.log("edgeDrawers");
//console.log(edgeDrawers);
//
////*
//source
//  .map(function(input) {
//    //var output = renderToString(<App />);
//    var output = renderToString(
//      React.createElement(
//        Diagram,
//        {
//          entities: _.values(input.entityMap),
//          entityMap: input.entityMap,
//          zIndices: input.pathway.contains,
//          customStyle: {},
//          edgeDrawers: edgeDrawers,
//          markerDrawers: markerDrawers,
//          icons: {}
//        },
//        null
//      )
//    );
//    console.log("output");
//    console.log(output);
//    return output;
//    /*
//    var kaavio = new Diagram(input);
//    console.log("kaavio");
//    console.log(kaavio);
//    return renderToString(kaavio);
//    //*/
//  })
//  .errors(function(err) {
//    console.error(err);
//    process.exit(1);
//  })
//  .map(x => String(x))
//  .pipe(process.stdout);
////*/
//
///*
//hl(source).map(x => hl([x])).each(function(jsonStream) {
//  var kaavio = new Diagram();
//  console.log("kaavio");
//  console.log(kaavio);
//
//  jsonStream
//    .errors(function(err) {
//      console.error(err);
//      process.exit(1);
//    })
//    .map(x => String(x))
//    .pipe(process.stdout);
//});
////*/
//
//// TODO does the process exit on its own?
////process.exit(0);
