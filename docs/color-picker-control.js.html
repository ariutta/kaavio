<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: editor/sub-components/color-picker-control.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"kaavio","disqus":"false","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"","description":"","keyword":""},"linenums":false};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">kaavio</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="module.exports~simpleModalComponent">
            <span class="title">
                <a href="module.exports-simpleModalComponent.html">module.exports~simpleModalComponent</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="module.exports~simpleModalComponent.config"><a href="module.exports-simpleModalComponent.html#config">config</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="color-picker-control.js.html">Source: editor/sub-components/color-picker-control.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>/***********************************
 * colorPickerControl
 **********************************/

var m = require('mithril');

var colorPickerControl = {};

/**
colorPickerControl config factory. The params in this doc refer to properties
                                      of the `ctrl` argument
@param {Object} data - the data with which to populate the &lt;input>
@param {number} value - the hex value of the item in `data` that we want to select
@param {function(Object id)} onchange - the event handler to call when the selection changes.
    `id` is the the same as `value`
*/
colorPickerControl.config = function(ctrl) {
  return function(element, isInitialized) {
    var el = $(element);

    if (!Modernizr.inputtypes.color &amp;&amp; !isInitialized) {
      // Polyfill for browsers that don't natively
      // support inputs of type "color"
      m.startComputation();
      window.setTimeout(function() {
        el.spectrum({
          preferredFormat: 'hex',
          showPalette: true,
          palette: [
            ['black', 'white', 'blanchedalmond'],
            ['rgb(255, 128, 0);', 'hsv 100 70 50', 'lightyellow']
          ]
        });
        //the service is done, tell Mithril that it may redraw
        m.endComputation();
      }, 250);
    }
  }
}

colorPickerControl.vm = (function() {

  var vm = {};

  vm.init = function() {
    vm.disabled = m.prop(false);
    vm.color = m.prop('');

    // react to user updating color value
    vm.updateColor = function(newColor) {
      if (!!newColor) {
        vm.color(newColor);
      }
    };

    vm.reset = function() {
      vm.color('');
    }

  }

  return vm;
})();

colorPickerControl.controller = function() {
  colorPickerControl.vm.init();
}

//this view implements a color-picker input for both
//browers that support it natively and those that don't
colorPickerControl.view = function(ctrl) {
  return m('input[type="color"][style="width: 30px; height: 30px; transform: translateY(1px);"]', {
    config: colorPickerControl.config(ctrl),
    onchange: m.withAttr('value', colorPickerControl.vm.updateColor),
    value: colorPickerControl.vm.color(),
    disabled: colorPickerControl.vm.disabled()
  })
}

module.exports = colorPickerControl;
</code></pre>
        </article>
    </section>






        
        <!-- disqus code -->
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <!-- // disqus code -->
        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Thu May 14 2015 14:04:40 GMT-0700 (PDT)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
